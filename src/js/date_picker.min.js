var date_picker={};date_picker.current=new Date,date_picker.container=document.createElement("div"),date_picker.container.className+="date-picker",date_picker.createCards=function(){for(i=0;i<=2;i++){var e=document.createElement("div");e.className+="date-card",date_picker.container.appendChild(e)}},date_picker.effect={},date_picker.effect.cardsInit=function(){var e=$(".date-card");e[0].id="currentCard";for(var t=0;t<e.length;t++)e[t].style.width=290-10*t+"px",e[t].style.left=5*t+"px",e[t].style.top=5*t+"px",e[t].style.zIndex=999-t,0===t?e[t].style.backgroundColor="rgba(255,255,255,0.95)":e[t].style.backgroundColor="rgba(255,255,255,0.9)"},date_picker.effect.cardsNext=function(e,t){t.disabled=!0;var r=$(".date-card"),a=$(r[0]);a.addClass("card_anim1"),a.css("left","-50px"),a.css("opacity","0");var n=function(){a.remove();var e=document.createElement("div");e.setAttribute("class","date-card");var r=$(".date-card");$(r[r.length-1]).after(e),r=$(".date-card");for(var n=r.length-1;n>=0;n--)$(r[n]).addClass("card_anim2");date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear(),t.disabled=!1};setTimeout(n,400)},date_picker.effect.cardsPrev=function(e,t){t.disabled=!0;for(var r=$(".date-card"),a=r.length-1;a>=0;a--)$(r[a]).addClass("card_anim2");var n=$(r[r.length-1]);n.remove(),r=$(".date-card");var c=r[0];c.removeAttribute("id");for(var d=0;d<r.length;d++)r[d].style.width=280-10*d+"px",r[d].style.left=5*(d+1)+"px",r[d].style.top=5*(d+1)+"px",r[d].style.zIndex=998-d,r[d].style.backgroundColor="rgba(255,255,255,0.9)";var i=function(){var e=document.createElement("div");e.id="currentCard",date_picker.createData(date_picker.current,e),e.setAttribute("class","date-card card_anim2"),e.style.width="290px",e.style.backgroundColor="rgba(255,255,255,0.95)",e.style.zIndex="999",e.style.left="-50px",e.style.opacity=0,$(r[0]).before(e),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear();var a=function(){e.style.left="0",e.style.opacity=1,c.innerHTML=""};setTimeout(a,20),t.disabled=!1};setTimeout(i,200)},date_picker.createData=function(e,t){if(e){var r=e.getFullYear(),a=e.getMonth(),n=e.getDate(),c=(e.getDay(),function(e,t){if(t+=1,2==t)return e%4===0&&e%100!==0||e%400===0?29:28;var r=[1,3,5,7,8,10,12],a=[4,6,9,11];for(var n in r)if(t==r[n])return 31;for(n in a)if(t==a[n])return 30}),d=function(e,t,d){var i=document.createElement("div");i.className+="year-display";var l=document.createElement("button");l.innerHTML="-",l.id="prevYearBtn";var p=document.createElement("span");p.innerHTML=e;var o=document.createElement("button");o.innerHTML="+",o.id="nextYearBtn",i.appendChild(l),i.appendChild(p),i.appendChild(o);var u=document.createElement("button");u.id="confirmBtn",u.className+="confirm-btn",u.innerHTML="OK";var s=document.createElement("div");s.className+="calendar-head",s.appendChild(i),s.appendChild(u),d.appendChild(s);var v=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],m=document.createElement("button");t>0?m.innerHTML=v[t-1]:m.innerHTML=v[11],m.id="prevMonthBtn";var k=document.createElement("span");k.innerHTML=v[t];var f=document.createElement("button");11>t?f.innerHTML=v[t+1]:f.innerHTML=v[0],f.id="nextMonthBtn";var _=document.createElement("div");_.className+="month-display",_.appendChild(m),_.appendChild(k),_.appendChild(f),d.appendChild(_);var h=document.createElement("table"),g=document.createElement("thead"),M=document.createElement("tr");g.appendChild(M);for(var E=["SUN","MON","TUE","WED","THU","FRI","SAT"],C=0;6>=C;C++){var y=document.createElement("td");y.innerHTML=E[C],M.appendChild(y)}var b=document.createElement("tbody");h.appendChild(g),h.appendChild(b);for(var x=new Date(e,t,1),T=x.getDay(),Y=c(e,t),L=Math.floor((Y+T)/7),D=(Y+T)%7===0?L:L+1,H=1,N=1;D>=N;N++){for(var B=document.createElement("tr"),$=1;7>=$;$++){var I=document.createElement("td");if(H>Y)I.innerHTML="",B.appendChild(I);else{var F;1==N?$>=T+1?(F=document.createElement("button"),F.innerHTML=10>H?"0"+H:H,F.className+="date-btn",tmpDate=new Date,r==tmpDate.getFullYear()&&a==tmpDate.getMonth()&&H==tmpDate.getDate()&&(F.className+=" current-date"),I.appendChild(F),H++):I.innerHTML="":(F=document.createElement("button"),F.innerHTML=10>H?"0"+H:H,F.className+="date-btn",H==n&&(F.className+=" current-date"),I.appendChild(F),H++),B.appendChild(I)}}b.appendChild(B)}d.appendChild(h)};d(r,a,t),date_picker.event.selectDate()}else console.log("no now date input!")},date_picker.event={},date_picker.event.prevMonth=function(){var e=document.getElementById("prevMonthBtn");e.addEventListener("click",function(e){if(1==date_picker.current.getMonth()){var t=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(t,11,1)}else date_picker.current.setMonth(date_picker.current.getMonth()-1,1);var r=e.target;date_picker.effect.cardsPrev(1,r)})},date_picker.event.nextMonth=function(){var e=document.getElementById("nextMonthBtn");e.addEventListener("click",function(e){if(11==date_picker.current.getMonth()){var t=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(t,0,1)}else date_picker.current.setMonth(date_picker.current.getMonth()+1,1);var r=e.target;date_picker.effect.cardsNext(1,r)})},date_picker.event.prevYear=function(){var e=document.getElementById("prevYearBtn");e.addEventListener("click",function(e){var t=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(t);var r=e.target;date_picker.effect.cardsPrev(12,r)})},date_picker.event.nextYear=function(){var e=document.getElementById("nextYearBtn");e.addEventListener("click",function(e){var t=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(t);var r=e.target;date_picker.effect.cardsNext(12,r)})},date_picker.event.selectDate=function(){for(var e=$(".date-btn"),t=function(e){$(".date-picker .selected").removeClass("selected");var t=e.target,r=parseInt(t.innerHTML);date_picker.result=date_picker.current,date_picker.result.setDate(r),t.className+=" selected"},r=e.length-1;r>=0;r--)e[r].addEventListener("click",t)},date_picker.init=function(){date_picker.createCards(),$(".wrapper").append(date_picker.container),date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear()};