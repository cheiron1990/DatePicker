var date_picker={};date_picker.current=new Date,date_picker.domElem=document.createElement("div"),date_picker.domElem.header=document.createElement("div"),date_picker.domElem.header.year=document.createElement("div"),date_picker.domElem.header.year.prevBtn=document.createElement("button"),date_picker.domElem.header.year.yearNum=document.createElement("span"),date_picker.domElem.header.year.nextBtn=document.createElement("button"),date_picker.domElem.header.confirmBtn=document.createElement("button"),date_picker.domElem.monthDisplay=document.createElement("div"),date_picker.domElem.monthDisplay.prevBtn=document.createElement("button"),date_picker.domElem.monthDisplay.monthNum=document.createElement("span"),date_picker.domElem.monthDisplay.prevBtn=document.createElement("button"),date_picker.domElem.header.year.prevBtn.innerHTML='<i class="fa fa-angle-left"></i>',date_picker.domElem.header.year.nextBtn.innerHTML='<i class="fa fa-angle-right"></i>',date_picker.domElem.header.confirmBtn.innerHTML="OK",date_picker.domElem.className+="date-picker",date_picker.domElem.style.position="absolute",date_picker.domElem.header.className+="calendar-head",date_picker.domElem.header.year.className+="year-display",date_picker.domElem.header.confirmBtn.className+="confirm-btn",date_picker.domElem.monthDisplay.className+="month-display",date_picker.createDate.createYear=function(e){date_picker.domElem.header.year.yearNum.innerHTML=date_picker.current.getFullYear(),date_picker.event.prevYear(e),date_picker.event.nextYear(e)},date_picker.createDate.createMonth=function(e){var t=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],a=date_picker.current.getMonth();a>0?date_picker.domElem.monthDisplay.prevBtn.innerHTML=t[a-1]:date_picker.domElem.monthDisplay.prevBtn.innerHTML=t[11],date_picker.domElem.monthDisplay.monthNum.innerHTML=t[a],11>a?date_picker.domElem.monthDisplay.nextBtn.innerHTML=t[a+1]:date_picker.domElem.monthDisplay.nextBtn.innerHTML=t[0]},date_picker.domElem.header.year.appendChild(this.prevBtn),date_picker.domElem.header.year.appendChild(this.yearNum),date_picker.domElem.header.year.appendChild(this.nextBtn),date_picker.domElem.header.appendChild(this.year),date_picker.domElem.header.appendChild(this.confirmBtn),date_picker.domElem.monthDisplay.appendChild(this.prevBtn),date_picker.domElem.monthDisplay.appendChild(this.monthNum),date_picker.domElem.monthDisplay.appendChild(this.nextBtn),date_picker.domElem.appendChild(this.header),date_picker.domElem.appendChild(this.monthDisplay),date_picker.event.confirmResult(targetTrigger),date_picker.createCards=function(){for(i=0;i<=2;i++){var e=document.createElement("div");e.className+="date-card",date_picker.container.appendChild(e)}},date_picker.effect={},date_picker.effect.cardsInit=function(){var e=$(".date-card");e[0].id="currentCard";for(var t=0;t<e.length;t++)e[t].style.width=290-10*t+"px",e[t].style.left=5*t+"px",e[t].style.top=5*t+"px",e[t].style.zIndex=999-t,0===t?e[t].style.backgroundColor="rgba(255,255,255,0.95)":e[t].style.backgroundColor="rgba(255,255,255,0.9)"},date_picker.effect.cardsNext=function(e,t,a){t.disabled=!0;var r=$(".date-card"),n=$(r[0]);n.addClass("card_anim1"),n.css("left","-50px"),n.css("opacity","0");var d=function(){n.remove();var e=document.createElement("div");e.setAttribute("class","date-card");var r=$(".date-card");$(r[r.length-1]).after(e),r=$(".date-card");for(var d=r.length-1;d>=0;d--)$(r[d]).addClass("card_anim2");date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(a),date_picker.event.nextMonth(a),date_picker.event.prevYear(a),date_picker.event.nextYear(a),date_picker.event.confirmResult(a),t.disabled=!1};setTimeout(d,400)},date_picker.effect.cardsPrev=function(e,t,a){t.disabled=!0;for(var r=$(".date-card"),n=r.length-1;n>=0;n--)$(r[n]).addClass("card_anim2");var d=$(r[r.length-1]);d.remove(),r=$(".date-card");var c=r[0];c.removeAttribute("id");for(var i=0;i<r.length;i++)r[i].style.width=280-10*i+"px",r[i].style.left=5*(i+1)+"px",r[i].style.top=5*(i+1)+"px",r[i].style.zIndex=998-i,r[i].style.backgroundColor="rgba(255,255,255,0.9)";var p=function(){var e=document.createElement("div");e.id="currentCard",date_picker.createData(date_picker.current,e),e.setAttribute("class","date-card card_anim2"),e.style.width="290px",e.style.backgroundColor="rgba(255,255,255,0.95)",e.style.zIndex="999",e.style.left="-50px",e.style.opacity=0,$(r[0]).before(e),date_picker.event.prevMonth(a),date_picker.event.prevMonth(a),date_picker.event.nextMonth(a),date_picker.event.prevYear(a),date_picker.event.nextYear(a),date_picker.event.confirmResult(a);var n=function(){e.style.left="0",e.style.opacity=1,c.innerHTML=""};setTimeout(n,20),t.disabled=!1};setTimeout(p,200)},date_picker.createData=function(e,t){if(e){var a=e.getFullYear(),r=e.getMonth(),n=(e.getDate(),e.getDay(),function(e,t){if(t+=1,2==t)return e%4===0&&e%100!==0||e%400===0?29:28;var a=[1,3,5,7,8,10,12],r=[4,6,9,11];for(var n in a)if(t==a[n])return 31;for(n in r)if(t==r[n])return 30}),d=function(e,t,d){t>0?prevMonthBtn.innerHTML=monthsName[t-1]:prevMonthBtn.innerHTML=monthsName[11],MonthNumber.innerHTML=monthsName[t],11>t?nextMonthBtn.innerHTML=monthsName[t+1]:nextMonthBtn.innerHTML=monthsName[0],monthDisplay.appendChild(prevMonthBtn),monthDisplay.appendChild(MonthNumber),monthDisplay.appendChild(nextMonthBtn),d.appendChild(monthDisplay);var c=document.createElement("table"),i=document.createElement("thead"),p=document.createElement("tr");i.appendChild(p);for(var l=["SUN","MON","TUE","WED","THU","FRI","SAT"],o=0;6>=o;o++){var m=document.createElement("td");m.innerHTML=l[o],p.appendChild(m)}var s=document.createElement("tbody");c.appendChild(i),c.appendChild(s);for(var u=new Date(e,t,1),h=u.getDay(),k=n(e,t),_=Math.floor((k+h)/7),v=(k+h)%7===0?_:_+1,f=1,E=1;v>=E;E++){for(var y=document.createElement("tr"),g=1;7>=g;g++){var M=document.createElement("td");if(f>k)M.innerHTML="",y.appendChild(M);else{var D;1==E?g>=h+1?(D=document.createElement("button"),D.innerHTML=10>f?"0"+f:f,D.className+="date-btn",tmpDate=new Date,a==tmpDate.getFullYear()&&r==tmpDate.getMonth()&&f==tmpDate.getDate()&&(D.className+=" current-date"),M.appendChild(D),f++):M.innerHTML="":(D=document.createElement("button"),D.innerHTML=10>f?"0"+f:f,D.className+="date-btn",a==tmpDate.getFullYear()&&r==tmpDate.getMonth()&&f==tmpDate.getDate()&&(D.className+=" current-date"),M.appendChild(D),f++),y.appendChild(M)}}s.appendChild(y)}d.appendChild(c)};d(a,r,t),date_picker.event.selectDate()}else console.log("no now date input!")},date_picker.event={},date_picker.event.prevMonth=function(e){var t=document.getElementById("prevMonthBtn");t.addEventListener("click",function(t){if(1==date_picker.current.getMonth()){var a=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(a,11,1)}else date_picker.current.setMonth(date_picker.current.getMonth()-1,1);var r=t.target;date_picker.effect.cardsPrev(1,r,e)})},date_picker.event.nextMonth=function(e){var t=document.getElementById("nextMonthBtn");t.addEventListener("click",function(t){if(11==date_picker.current.getMonth()){var a=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(a,0,1)}else date_picker.current.setMonth(date_picker.current.getMonth()+1,1);var r=t.target;date_picker.effect.cardsNext(1,r,e)})},date_picker.event.prevYear=function(e){date_picker.domElem.header.year.prevBtn.addEventListener("click",function(t){var a=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(a);var r=t.target;date_picker.effect.cardsPrev(12,r,e)})},date_picker.event.nextYear=function(e){var t=document.getElementById("nextYearBtn");t.addEventListener("click",function(t){var a=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(a);var r=t.target;date_picker.effect.cardsNext(12,r,e)})},date_picker.event.selectDate=function(){for(var e=$(".date-btn"),t=function(e){$(".date-picker .selected").removeClass("selected");var t=e.target,a=parseInt(t.innerHTML);date_picker.result=date_picker.current,date_picker.result.setDate(a),t.className+=" selected"},a=e.length-1;a>=0;a--)e[a].addEventListener("click",t)},date_picker.event.confirmResult=function(e){var t=document.getElementById("confirmBtn");t.addEventListener("click",function(t){var a,r,n;a=date_picker.result.getFullYear(),r=date_picker.result.getMonth()<9?"0"+(date_picker.result.getMonth()+1):date_picker.result.getMonth()+1,n=date_picker.result.getDate()<10?"0"+date_picker.result.getDate():date_picker.result.getDate(),e[0].value=a+"-"+r+"-"+n,$(e[0]).change();var d=document.getElementsByTagName("body");d[0].removeChild(date_picker.container),date_picker.container.innerHTML=""})},date_picker.init=function(e){e[0].addEventListener("click",function(t){date_picker.createCards(),$("body").append(date_picker.container);var a=e.offset();date_picker.container.style.left=a.left+(e[0].clientWidth-290)/2+"px",date_picker.container.style.top=a.top-(250-e[0].clientHeight)/2+"px",date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(e),date_picker.event.nextMonth(e),date_picker.event.prevYear(e),date_picker.event.nextYear(e),date_picker.event.confirmResult(e)})};