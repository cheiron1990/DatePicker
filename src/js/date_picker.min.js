var date_picker={};date_picker.current=new Date,date_picker.container=document.createElement("div"),date_picker.container.className+="date-picker",date_picker.container.style.position="absolute",date_picker.createCards=function(){for(i=0;i<=2;i++){var e=document.createElement("div");e.className+="date-card",date_picker.container.appendChild(e)}},date_picker.effect={},date_picker.effect.cardsInit=function(){var e=$(".date-card");e[0].id="currentCard";for(var t=0;t<e.length;t++)e[t].style.width=290-10*t+"px",e[t].style.left=5*t+"px",e[t].style.top=5*t+"px",e[t].style.zIndex=999-t,0===t?e[t].style.backgroundColor="rgba(255,255,255,0.95)":e[t].style.backgroundColor="rgba(255,255,255,0.9)"},date_picker.effect.cardsNext=function(e,t){t.disabled=!0;var r=$(".date-card"),a=$(r[0]);a.addClass("card_anim1"),a.css("left","-50px"),a.css("opacity","0");var n=function(){a.remove();var e=document.createElement("div");e.setAttribute("class","date-card");var r=$(".date-card");$(r[r.length-1]).after(e),r=$(".date-card");for(var n=r.length-1;n>=0;n--)$(r[n]).addClass("card_anim2");date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear(),t.disabled=!1};setTimeout(n,400)},date_picker.effect.cardsPrev=function(e,t){t.disabled=!0;for(var r=$(".date-card"),a=r.length-1;a>=0;a--)$(r[a]).addClass("card_anim2");var n=$(r[r.length-1]);n.remove(),r=$(".date-card");var c=r[0];c.removeAttribute("id");for(var d=0;d<r.length;d++)r[d].style.width=280-10*d+"px",r[d].style.left=5*(d+1)+"px",r[d].style.top=5*(d+1)+"px",r[d].style.zIndex=998-d,r[d].style.backgroundColor="rgba(255,255,255,0.9)";var i=function(){var e=document.createElement("div");e.id="currentCard",date_picker.createData(date_picker.current,e),e.setAttribute("class","date-card card_anim2"),e.style.width="290px",e.style.backgroundColor="rgba(255,255,255,0.95)",e.style.zIndex="999",e.style.left="-50px",e.style.opacity=0,$(r[0]).before(e),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear();var a=function(){e.style.left="0",e.style.opacity=1,c.innerHTML=""};setTimeout(a,20),t.disabled=!1};setTimeout(i,200)},date_picker.createData=function(e,t){if(e){var r=e.getFullYear(),a=e.getMonth(),n=(e.getDate(),e.getDay(),function(e,t){if(t+=1,2==t)return e%4===0&&e%100!==0||e%400===0?29:28;var r=[1,3,5,7,8,10,12],a=[4,6,9,11];for(var n in r)if(t==r[n])return 31;for(n in a)if(t==a[n])return 30}),c=function(e,t,c){var d=document.createElement("div");d.className+="year-display";var i=document.createElement("button");i.innerHTML="-",i.id="prevYearBtn";var l=document.createElement("span");l.innerHTML=e;var p=document.createElement("button");p.innerHTML="+",p.id="nextYearBtn",d.appendChild(i),d.appendChild(l),d.appendChild(p);var o=document.createElement("button");o.id="confirmBtn",o.className+="confirm-btn",o.innerHTML="OK";var u=document.createElement("div");u.className+="calendar-head",u.appendChild(d),u.appendChild(o),c.appendChild(u);var s=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],v=document.createElement("button");t>0?v.innerHTML=s[t-1]:v.innerHTML=s[11],v.id="prevMonthBtn";var m=document.createElement("span");m.innerHTML=s[t];var k=document.createElement("button");11>t?k.innerHTML=s[t+1]:k.innerHTML=s[0],k.id="nextMonthBtn";var _=document.createElement("div");_.className+="month-display",_.appendChild(v),_.appendChild(m),_.appendChild(k),c.appendChild(_);var f=document.createElement("table"),h=document.createElement("thead"),g=document.createElement("tr");h.appendChild(g);for(var M=["SUN","MON","TUE","WED","THU","FRI","SAT"],y=0;6>=y;y++){var E=document.createElement("td");E.innerHTML=M[y],g.appendChild(E)}var C=document.createElement("tbody");f.appendChild(h),f.appendChild(C);for(var b=new Date(e,t,1),x=b.getDay(),D=n(e,t),L=Math.floor((D+x)/7),T=(D+x)%7===0?L:L+1,Y=1,H=1;T>=H;H++){for(var B=document.createElement("tr"),N=1;7>=N;N++){var $=document.createElement("td");if(Y>D)$.innerHTML="",B.appendChild($);else{var I;1==H?N>=x+1?(I=document.createElement("button"),I.innerHTML=10>Y?"0"+Y:Y,I.className+="date-btn",tmpDate=new Date,r==tmpDate.getFullYear()&&a==tmpDate.getMonth()&&Y==tmpDate.getDate()&&(I.className+=" current-date"),$.appendChild(I),Y++):$.innerHTML="":(I=document.createElement("button"),I.innerHTML=10>Y?"0"+Y:Y,I.className+="date-btn",r==tmpDate.getFullYear()&&a==tmpDate.getMonth()&&Y==tmpDate.getDate()&&(I.className+=" current-date"),$.appendChild(I),Y++),B.appendChild($)}}C.appendChild(B)}c.appendChild(f)};c(r,a,t),date_picker.event.selectDate()}else console.log("no now date input!")},date_picker.event={},date_picker.event.prevMonth=function(){var e=document.getElementById("prevMonthBtn");e.addEventListener("click",function(e){if(1==date_picker.current.getMonth()){var t=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(t,11,1)}else date_picker.current.setMonth(date_picker.current.getMonth()-1,1);var r=e.target;date_picker.effect.cardsPrev(1,r)})},date_picker.event.nextMonth=function(){var e=document.getElementById("nextMonthBtn");e.addEventListener("click",function(e){if(11==date_picker.current.getMonth()){var t=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(t,0,1)}else date_picker.current.setMonth(date_picker.current.getMonth()+1,1);var r=e.target;date_picker.effect.cardsNext(1,r)})},date_picker.event.prevYear=function(){var e=document.getElementById("prevYearBtn");e.addEventListener("click",function(e){var t=date_picker.current.getFullYear()-1;date_picker.current.setFullYear(t);var r=e.target;date_picker.effect.cardsPrev(12,r)})},date_picker.event.nextYear=function(){var e=document.getElementById("nextYearBtn");e.addEventListener("click",function(e){var t=date_picker.current.getFullYear()+1;date_picker.current.setFullYear(t);var r=e.target;date_picker.effect.cardsNext(12,r)})},date_picker.event.selectDate=function(){for(var e=$(".date-btn"),t=function(e){$(".date-picker .selected").removeClass("selected");var t=e.target,r=parseInt(t.innerHTML);date_picker.result=date_picker.current,date_picker.result.setDate(r),t.className+=" selected"},r=e.length-1;r>=0;r--)e[r].addEventListener("click",t)},date_picker.event.confirmResult=function(e){var t=document.getElementById("confirmBtn");t.addEventListener("click",function(t){var r,a,n;r=date_picker.result.getFullYear(),a=date_picker.result.getMonth()<9?"0"+(date_picker.result.getMonth()+1):date_picker.result.getMonth()+1,n=date_picker.result.getDate()<10?"0"+date_picker.result.getDate():date_picker.result.getDate(),e[0].value=r+"-"+a+"-"+n,$(e[0]).change();var c=document.getElementsByTagName("body");c[0].removeChild(date_picker.container),date_picker.container.innerHTML=""})},date_picker.init=function(e){e[0].addEventListener("click",function(t){date_picker.createCards(),$("body").append(date_picker.container);var r=e.offset();date_picker.container.style.left=r.left+(e[0].clientWidth-290)/2+"px",date_picker.container.style.top=r.top-(250-e[0].clientHeight)/2+"px",date_picker.effect.cardsInit(),date_picker.createData(date_picker.current,document.getElementById("currentCard")),date_picker.event.prevMonth(),date_picker.event.nextMonth(),date_picker.event.prevYear(),date_picker.event.nextYear(),date_picker.event.confirmResult(e)})};